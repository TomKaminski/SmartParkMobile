<ion-view title="SmartPark - settingsCtrl">
    <ion-content has-bouncing="true" overflow-scroll="false">
        <div class="col-80 col-offset-10 margin-top-20">
            <img src="../img/logo.png" />
        </div>
        <div class="margin-top-20">
            <h4 class="no-padding-border">Zmiana hasła</h4>
            <div class="list" ng-form name="codeForm">
                <label class="item item-input item-floating-label" ng-class="{'has-error':codeForm.newCode.$invalid && codeForm.newCode.$touched}">
                    <span class="input-label">Nowe hasło</span>
                    <input type="password" placeholder="Nowe hasło" ng-model="newCode" required name="newCode"
                           id="newCode">
                    <span class="form-error" ng-show="codeForm.newCode.$error.required && codeForm.email.$touched">Podaj nowe hasło.</span>
                    <span class="form-error"
                          ng-show="(codeForm.newCode.$error.minlength) && codeForm.newCode.$touched">Hasło musi mieć minimum 8 znaków!</span>
                </label>
                <label class="item item-input item-floating-label" id="passLabel" ng-class="{'has-error':codeForm.code.$invalid && codeForm.code.$touched}">
                    <span class="input-label">Obecne hasło</span>
                    <input type="password" placeholder="Hasło" required name="code" ng-model="code" id="code" ng-minlength="8">
                    <span class="form-error" ng-show="codeForm.code.$error.required && codeForm.code.$touched">Podaj hasło!</span>
                    <span class="form-error"
                          ng-show="(codeForm.code.$error.minlength) && codeForm.code.$touched">Hasło musi mieć minimum 8 znaków!</span>
                </label>
            </div>
            <p class="text-center" ng-show="settingsCtrl.error!=''">{{settingsCtrl.error}}</p>
            <div class="row no-padding">
                <button class="button button-full button-positive" ng-class="{'disabled': settingsCtrl.processing==true || codeForm.$invalid}" ng-click="settingsCtrl.changePassword(code,newCode)">
                    <span class="icon" ng-class="{'changeCodeContent':!settingsCtrl.processing}"></span>
                    <ion-spinner icon="android" class="spinner-light" ng-if="settingsCtrl.processing"></ion-spinner>
                </button>
            </div>
        </div>
        <div class="margin-top-20">
            <h4 class="no-padding-border">Zmiana emaila</h4>
            <div class="list" ng-form name="formEmail">
                <label class="item item-input item-floating-label" ng-class="{'has-error':formEmail.email.$invalid && formEmail.email.$touched}">
                    <span class="input-label">Nowy adres email</span>
                    <input type="email" placeholder="Nowy adres email" ng-model="email" required name="email"
                           id="email">
                    <span class="form-error" ng-show="formEmail.email.$error.required && formEmail.email.$touched">Podaj nowy adres email!</span>
                    <span class="form-error"
                          ng-show="formEmail.email.$error.email && formEmail.email.$touched">To nie jest prawidłowy adres email!</span>
                </label>
                <label class="item item-input item-floating-label" id="passLabel" ng-class="{'has-error':formEmail.password.$invalid && formEmail.password.$touched}">
                    <span class="input-label">Hasło</span>
                    <input type="password" placeholder="Hasło" required name="password" ng-model="password" id="password" ng-minlength="8">
                    <span class="form-error" ng-show="formEmail.password.$error.required && formEmail.password.$touched">Podaj hasło!</span>
                    <span class="form-error"
                          ng-show="(formEmail.password.$error.minlength) && formEmail.password.$touched">Hasło musi mieć minimum 8 znaków!</span>
                </label>
            </div>
            <p class="text-center" ng-show="settingsCtrl.errorEmail!=''">{{settingsCtrl.errorEmail}}</p>
            <button class="button button-full button-positive" ng-click="settingsCtrl.changeEmail(email,password)" ng-show="!settingsCtrl.changeEmail || formEmail.$invalid" ng-class="{'disabled':formEmail.$invalid || settingsCtrl.processingEmail==true}">
                <span class="icon" ng-class="{'changeCodeContent':!settingsCtrl.processingEmail}"></span>
                <ion-spinner icon="android" class="spinner-light" ng-if="settingsCtrl.processingEmail"></ion-spinner>
            </button>
        </div>
    </ion-content>
</ion-view>